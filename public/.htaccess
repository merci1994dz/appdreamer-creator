
# إعدادات التطبيق لاستضافة Namecheap
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # إعادة توجيه www إلى non-www (اختياري)
  # RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
  # RewriteRule ^(.*)$ https://%1/$1 [R=301,L]
  
  # تجنب التخزين المؤقت للملفات المهمة
  <FilesMatch "\.(html|json|js)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
  
  # منع التخزين المؤقت لبيانات API
  <FilesMatch "data\.json$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
  
  # السماح بالوصول عبر CORS (مهم لملفات API)
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
  </IfModule>
  
  # توجيه جميع الطلبات إلى index.html (ضروري لـ React Router)
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

# تحسين GZip للضغط
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# تعيين منطقة زمنية افتراضية
SetEnv TZ Africa/Casablanca
